<head>
  <title>CS249EventsApp</title>
</head>

<body>
    <div class="navbar navbar-default" role="navigation">
		<div class="navbar-header">
			<a class="navbar-brand" id="home">Events Organizer</a>
		</div>
		<div class="navbar-collapse collapse">
			{{#if currentUser}}
           <!--  <a class="navbar-brand" id="home">Home</a> -->
            <a class="navbar-brand" id="quickhelp">Quick Help</a>
            <a class="navbar-brand" id="schedule">Schedule</a>
			<a class="navbar-brand" id="manageEvents">Manage Events</a>
            {{/if}}
			<ul class="nav navbar-nav navbar-right">
				{{> loginButtons}} <!-- here -->
			</ul>
		</div>
	</div>
    
    {{#if homePage}}
    {{> home}}
    {{/if}}
    
    {{#if quickHelpPage}}
    {{> quickHelp}}
    {{/if}}
    
    {{#if schedulePage}}
    {{> schedule}}
    {{/if}}
	
	{{#if manageEventsPage}}
	{{> manageEvents}}
	{{/if}}
</body>

<template name="plsLogin">
	<div>You need to log in</div>
</template>

<template name="home">
	<div> HOME PAGE</div>
</template>

<template name="quickHelp">
    {{#if currentUser}}
    <section>
		<div class="padding">
			<form class="new-thread form-horizontal" style="padding-bottom: 40px !important;">
					<input class="form-control input-lg" type="text" name="thread" placeholder="Ask a question" />
			</form>
            <ul>
              {{#each threads}}
                {{> oneThread}}
              {{/each}}
            </ul>
		</div>
    </section>
	{{else}}
	{{> plsLogin}}	
	{{/if}}
</template>
    
<template name="oneThread">
    {{#if currentUser}}
        <div class="list-group">
            <li class="list-group-item {{#if active}}active{{else}}oldQuestion{{/if}} {{#if newQ}}newQuestion{{/if}}">
                {{text}}  
                <button type="button" class="close done green">✓</button>
                <button type="button" class="close delete red">×</button>
            </li>
            {{#each responses}}
                <li class="list-group-item">{{this}}</li>
            {{/each}}
            <li class="list-group-item">
                <form class="new-response form-horizontal">
                    <input class="form-control" type="text" name="response" placeholder="Type to reply" />
                </form>
            </li>
        </div>
	{{else}}
	{{> plsLogin}}
    {{/if}}
</template>

<template name="schedule">
	{{#if currentUser}}
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <td>Time</td>
                <td>Event</td>
                <td>Location<!-- <button type="button" class="add close blue">+</button> --></td>
            </tr>
        </thead>
        <tbody>
			<tr class="info">
			<!-- <form id="fillSchedule" class="form-horizontal"> -->
				<td><input type="text" class="form-control" id="datepicker" name="inputTime"></td>
				<td><input type="text" class="form-control" id="inputEvent" name="inputEvent" placeholder="Event"></td>
				<td>
					<div class="col-md-11"><input type="text" class="form-control" id="inputLocation" name="inputLocation" placeholder="Location"></div>
					<div class="col-md-1"><button type="button" class="add close blue">+</button></div>
				</td>

			<!-- </form> -->
			</tr>
			<script>
				 $("#datepicker").datepicker({orientation: "top auto"});
			</script>
			{{#each calendar}}
			<tr>
				<td>{{timeDateString}}</td>
				<td>{{this.event}}</td>
				<td>
					<div class="col-md-11">{{this.location}}</div>
					<div class="col-md-1"><button type="button" class="close remove">×</button></div>
				</td>
			</tr>
			{{/each}}
        </tbody>
    </table>
    <!-- <div class="col-md-8 scheduleForm">
        <form id="fillSchedule" class="form-horizontal">
            <fieldset>
            <legend>Add to Schedule</legend>
            <div class="form-group">
                <label for="inputEvent" class="col-lg-2 control-label">Event</label>
                <div class="col-lg-10">
                <input type="text" class="form-control" id="inputEvent" name="inputEvent" placeholder="Event">
                </div>
            </div>
            <div class="form-group">
                <label for="inputLocation" class="col-lg-2 control-label">Location</label>
                <div class="col-lg-10">
                <input type="text" class="form-control" id="inputLocation" name="inputLocation" placeholder="Location">
                </div>
            </div>
            <div class="form-group">
                <label for="datepicker" class="col-lg-2 control-label">Time</label>
                <div class="col-lg-10">
                <input type="text" class="form-control" id="datepicker" name="inputTime">
                </div>
            <div class="form-group">
				<div class="col-lg-10 col-lg-offset-10">
					<button type="submit" class="btn btn-primary">Submit</button>
				</div>
			</div>
            </div>
            
            </fieldset>
        </form>
    </div> -->
	{{else}}
	{{> plsLogin}}
	{{/if}}
</template>

<template name="manageEvents">
	{{#if currentUser}}
	<div class="col-md-5">
		<form class="form-horizontal well eventsForm">
		<fieldset>
			<legend>Add an Event</legend>
			<div class="form-group">
				<label for="inputName" class="col-lg-3 control-label">Event Name</label>
				<div class="col-lg-9">
					<input type="text" class="form-control" id="inputName" name="eName" placeholder="Event Name">
				</div>
			</div>
			<div class="form-group">
				<label for="textArea" class="col-lg-3 control-label">Event Description</label>
				<div class="col-lg-9">
					<textarea class="form-control" rows="3" id="textArea" name="eDescript"></textarea>
					<span class="help-block">Add a description about your event.</span>
				</div>
			</div>
			<div class="form-group">
				<label for="startTime" class="col-lg-3 control-label">Start Date</label>
				<div class='input-group date col-lg-9' id='startTime'>
					<input type='text' class="form-control" name="startTime"/>
					<span class="input-group-addon">
						<span class="glyphicon glyphicon-calendar"></span>
					</span>
				</div>
			</div>
			<script type="text/javascript">
				$(function () {
					$('#startTime').datetimepicker();
				});
			</script>
			<div class="form-group">
				<label for="endTime" class="col-lg-3 control-label">End Date</label>
				<div class='input-group date col-lg-9' id='endTime'>
					<input type='text' class="form-control" name="endTime" />
					<span class="input-group-addon">
						<span class="glyphicon glyphicon-calendar"></span>
					</span>
				</div>
			</div>
			<script type="text/javascript">
				$(function () {
					$('#endTime').datetimepicker();
				});
			</script>
			<div class="form-group">
				<div class="col-lg-10 col-lg-offset-3">
					<button type="reset" class="btn btn-default">Cancel</button>
					<button type="submit" class="btn btn-primary">Submit</button>
				</div>
			</div>
		</fieldset>
		</form>
	</div>
	<!-- <div class="list-group col-md-7">
		<li class="list-group-item active">List of Events</li>
		{{#each events}}
			<li class="list-group-item">
				{{this.name}}
				<button type="button" class="close remove">×</button>
			</li>
		{{/each}}
	</div>	 -->
		
		
		
	<div class="panel-group col-md-7" id="accordion" role="tablist" aria-multiselectable="true">
		<div class="list-group">
			<li class="list-group-item active">List of Events</li>
		</div>
		{{#each events}}
		<div class="panel panel-default">
			<div class="panel-heading" role="tab">
				<h4 class="panel-title">
				<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#{{this._id}}" aria-expanded="false" aria-controls="collapseTwo">
					{{this.name}}
					{{#if createdByUser}}
					<button type="button" class="close remove">×</button>
					{{/if}}
				</a>
				</h4>
			</div>
			<div id="{{this._id}}" class="panel-collapse collapse" role="tabpanel">
				<div class="panel-body">
				{{this.description}}
				</div>
			</div>
		</div>
		{{/each}}
	</div>
	{{else}}
	{{> plsLogin}}
	{{/if}}
</template>